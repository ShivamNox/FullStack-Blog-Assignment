import{r as c,j as e,b as g,S as j}from"./index-tqXRR1Pi.js";import{b as D}from"./format-NXNzsY0c.js";import{E as y,P as v,a as w}from"./EmptyState-HJXhkYQx.js";function k({isOpen:r,onClose:i,onConfirm:n,title:m,message:l,confirmText:u="Confirm",cancelText:t="Cancel",isLoading:o=!1,variant:d="danger"}){if(c.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),!r)return null;const a=d==="danger"?"btn-danger":"btn-primary";return e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:i},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ConfirmDialog.jsx",lineNumber:33,columnNumber:7},this),e.jsxDEV("div",{className:"relative bg-white rounded-xl shadow-xl max-w-md w-full mx-4 p-6 animate-in fade-in zoom-in duration-200",children:[e.jsxDEV("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:m},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ConfirmDialog.jsx",lineNumber:40,columnNumber:9},this),e.jsxDEV("p",{className:"text-gray-600 mb-6",children:l},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ConfirmDialog.jsx",lineNumber:41,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-3 justify-end",children:[e.jsxDEV("button",{onClick:i,disabled:o,className:"btn-secondary",children:t},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ConfirmDialog.jsx",lineNumber:44,columnNumber:11},this),e.jsxDEV("button",{onClick:n,disabled:o,className:a,children:o?"Please wait...":u},void 0,!1,{fileName:"/home/runner/workspace/client/src/components/ConfirmDialog.jsx",lineNumber:51,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ConfirmDialog.jsx",lineNumber:43,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ConfirmDialog.jsx",lineNumber:39,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/components/ConfirmDialog.jsx",lineNumber:31,columnNumber:5},this)}function V(){var f;const r=g(),{posts:i,pagination:n,loading:m,refetch:l,deletePost:u}=D(),[t,o]=c.useState({isOpen:!1,post:null}),[d,a]=c.useState(!1),h=c.useCallback(s=>{l({page:s}),window.scrollTo({top:0,behavior:"smooth"})},[l]),N=s=>{r(`/edit/${s._id}`)},b=s=>{o({isOpen:!0,post:s})},p=async()=>{if(!t.post)return;a(!0);const s=await u(t.post._id);a(!1),s&&o({isOpen:!1,post:null})},x=()=>{o({isOpen:!1,post:null})};return m?e.jsxDEV("div",{className:"flex justify-center py-16",children:e.jsxDEV(j,{size:"lg"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:48,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:47,columnNumber:7},this):e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900",children:"My Posts"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:57,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600 mt-1",children:[(n==null?void 0:n.totalPosts)||0," post",(n==null?void 0:n.totalPosts)!==1?"s":""," published"]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:58,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:56,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>r("/create"),className:"btn-primary",children:"âœï¸ New Post"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:62,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:55,columnNumber:7},this),i.length===0?e.jsxDEV(y,{icon:"ðŸ“",title:"No posts yet",description:"Start sharing your thoughts with the world!",actionText:"Create Your First Post",actionLink:"/create"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:71,columnNumber:9},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(s=>e.jsxDEV(v,{post:s,showActions:!0,onEdit:N,onDelete:b},s._id,!1,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:82,columnNumber:15},this))},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:80,columnNumber:11},this),e.jsxDEV(w,{pagination:n,onPageChange:h},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:92,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:79,columnNumber:9},this),e.jsxDEV(k,{isOpen:t.isOpen,onClose:x,onConfirm:p,title:"Delete Post",message:`Are you sure you want to delete "${(f=t.post)==null?void 0:f.title}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",isLoading:d,variant:"danger"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:96,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/MyPosts.jsx",lineNumber:54,columnNumber:5},this)}export{V as default};
